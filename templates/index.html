<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solucionador de ecuaciones diferenciales lineales de 2do orden</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background-color: #f0f2f5; color: #333; }
        h1 { text-align: center; color: #2c3e50; margin-bottom: 30px; }
        
        /* Estilos del Input */
        .input-container {
            background: white; padding: 30px; border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 8px;
            font-size: 1.2em;
        }
        input[type="number"] { width: 70px; padding: 8px; text-align: center; font-size: 1em; border: 1px solid #ccc; border-radius: 6px; }
        select { padding: 8px; font-size: 1em; border: 1px solid #ccc; border-radius: 6px; background: #fff; cursor: pointer; }
        
        button {
            margin-top: 20px; width: 100%; padding: 12px;
            background-color: #007bff; color: white; border: none; border-radius: 6px;
            font-size: 1.1em; cursor: pointer; transition: background 0.3s;
        }
        button:hover { background-color: #0056b3; }

        /* Resultados */
        #resultados { margin-top: 30px; }
        .paso {
            background: white; margin-bottom: 20px; padding: 20px;
            border-left: 6px solid #28a745; border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            opacity: 0; transform: translateY(20px); transition: all 0.5s ease;
        }
        .paso.visible { opacity: 1; transform: translateY(0); }
        .paso h3 { margin-top: 0; color: #28a745; font-size: 1.1em; text-transform: uppercase; letter-spacing: 1px; }

        /* Autores */
        .authors {
            margin-top: 50px; padding-top: 20px; border-top: 1px solid #ccc;
            text-align: center; font-size: 0.9em; color: #666;
        }
        .authors strong { color: #333; }
    </style>
</head>
<body>

    <h1>Solucionador de ecuaciones diferenciales lineales de 2do orden</h1>

    <div class="input-container">
        <select id="signA">
            <option value="1">+</option>
            <option value="-1">-</option>
        </select>
        <input type="number" id="valA" value="1" min="0" step="any"> 
        <span>\( y'' \)</span>

        <select id="signB">
            <option value="1">+</option>
            <option value="-1">-</option>
        </select>
        <input type="number" id="valB" value="5" min="0" step="any"> 
        <span>\( y' \)</span>

        <select id="signC">
            <option value="1">+</option>
            <option value="-1">-</option>
        </select>
        <input type="number" id="valC" value="6" min="0" step="any"> 
        <span>\( y = 0 \)</span>

        <button onclick="resolver()">Calcular Solución</button>
    </div>

    <div id="resultados"></div>

    <div class="authors">
        <p>Desarrollado por:</p>
        <p><strong>Carlos Alberto Cruz Guzman</strong> & <strong>Israel Romero Ortega</strong></p>
        <p>Programa de Ecuaciones Diferenciales</p>
    </div>

    <script>
        async function resolver() {
            // Obtenemos valores y signos
            const valA = document.getElementById('valA').value;
            const signA = document.getElementById('signA').value;
            
            const valB = document.getElementById('valB').value;
            const signB = document.getElementById('signB').value;
            
            const valC = document.getElementById('valC').value;
            const signC = document.getElementById('signC').value;

            const contenedor = document.getElementById('resultados');
            contenedor.innerHTML = "";

            // Validación simple
            if(!valA || !valB || !valC) { alert("Por favor ingresa todos los números"); return; }
            if(valA == 0) { alert("El coeficiente 'a' no puede ser 0"); return; }

            const response = await fetch('/resolver', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    valA, signA,
                    valB, signB,
                    valC, signC
                })
            });

            const data = await response.json();

            if (data.status === 'success') {
                data.pasos.forEach((paso, index) => {
                    setTimeout(() => {
                        const div = document.createElement('div');
                        div.className = 'paso';
                        div.innerHTML = `<h3>${paso.titulo}</h3><p>${paso.texto}</p>`;
                        contenedor.appendChild(div);
                        MathJax.typesetPromise([div]).then(() => { div.classList.add('visible'); });
                    }, index * 800);
                });
            } else {
                contenedor.innerHTML = `<p style="color:red; text-align:center;">Error: ${data.message}</p>`;
            }
        }
    </script>
</body>
</html>
